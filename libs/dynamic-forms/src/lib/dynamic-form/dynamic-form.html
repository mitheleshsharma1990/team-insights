<form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-6 bg-gray-50 rounded-lg shadow-md max-w-md">

  <div *ngFor="let field of config" class="mb-4">

    <!-- Checkbox Field -->
    <div *ngIf="field.type === 'checkbox'" class="flex items-center gap-2">
      <input
        type="checkbox"
        [formControlName]="field.name"
        [id]="field.name"
      />
      <label [for]="field.name" class="text-gray-700 font-medium cursor-pointer">
        {{ field.label }}
      </label>
    </div>

    <!-- Text or Select Field -->
    <div *ngIf="field.type !== 'checkbox'" class="flex flex-col">
      <label [for]="field.name" class="mb-1 text-gray-700 font-medium">
        {{ field.label }}
      </label>
      <div class="w-full">
        <ng-container [ngSwitch]="field.type">
          <input
            *ngSwitchCase="'text'"
            [type]="field.type"
            [formControlName]="field.name"
            [id]="field.name"
            [required]="field.required ?? false"
            style="width: 100%; height: 2.5rem; padding: 0.5rem; border: 1px solid #ccc; border-radius: 0.375rem;"
          />
          <select
            *ngSwitchCase="'select'"
            [formControlName]="field.name"
            [id]="field.name"
            [required]="field.required ?? false"
            style="
                  width: 100%;
                  height: 2.5rem;
                  padding: 0.5rem 2.5rem 0.5rem 0.5rem;
                  border: 1px solid #ccc;
                  border-radius: 0.375rem;
                  outline: none; 
                "
          >
            <option *ngFor="let option of field.options" [value]="option">
              {{ option }}
            </option>
          </select>
        </ng-container>
      </div>
    </div>

    <!-- Error Message -->
    <div
      class="text-red-600 text-sm mt-1"
      *ngIf="form.get(field.name)?.invalid && form.get(field.name)?.touched"
    >
      This field is required.
    </div>

  </div>

  <!-- Submit Button -->
  <button
    type="submit"
    [disabled]="form.invalid"
    class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition"
  >
    Submit
  </button>

</form>
